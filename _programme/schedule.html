---
title: Schedule
nav_title: Schedule
top_nav_category: Programme
tab_index: 2
---
<h3>Overview</h3>
<table class='conf-dates'>
{% for kd in site.key_dates %}
  {% if kd.attendable %}
  <tr><td class='conf-date-label'>{{ kd.date }}</td> <td>{{ kd.event }}</td></tr>
  {% endif %}
{% endfor %}
</table>

<div id="search-pane"><i class="fas fa-search"></i><input type="search" placeholder="Filter by author, title or topic" id="search" ></div>
<style id="search_style"></style>
<style id="parent_search_style"></style>
<style id="aux_search_style"></style>

<h3>Main Conference</h3>

<div class="instructions">Hover over each entry to find out author and abstract information. You can use the search box to filter by author. Click on an entry to add it to your schedule; once you have selected your preferred sessions, you can download all as a .ics at the bottom of the page</div>

<div id="schedule">
{% for day in site.main_schedule.days %}
<div id="day_{{ forloop.index }}" class="day-schedule">
  <h4 class="day">{{ day.name }}: {{ day.date | date: "%B %-d" }}</h3>
  <table class="day-program">
    {% for session in day.sessions %}
      {% if session.shared %}
      <tr id="session-{{ session.sess_id }}" onclick="toggleSession('{{ session.sess_id }}')"
          class="session-row shared session-name-row shared-session-name-row">
          <td class="session shared-session session-name-cell shared-name" colspan="{{ site.main_schedule.num_concurrent }}">
            <div class="times-and-name">
              <div class="session-times">{{ session.start | date: "%H:%M" }}–{{ session.end | date: "%H:%M" }}</div>
              <div class="session-name shared-session-name">{{ session.name }}</div>
            </div>
            <div class="session-location shared-session-location">{{ session.location }}</div>
            <div class="speakers session-speakers">{{ session.speakers | join: ", " }}</div>
          </td>
      {% else %}
      <tr id="{{ session.start | date: '%Y%m%d-%H%M' }}" class="session-row shared session-name-row conc-session-name-row">
          <td class="conc-session-shared-name session-name-cell shared-name" colspan="{{ site.main_schedule.num_concurrent }}">
            <div class="times-and-name">
              <div class="session-times">{{ session.start | date: "%H:%M" }}–{{ session.end | date: "%H:%M" }}</div>
              <div class="session-name">{{ session.name }}<span class="session-suffix">{{ session.suffix }}</span>
              </div>
            </div>
          </td>
      </tr>
      <tr id="{{ session.start | date: '%Y%m%d-%H%M' }}" class="session-row session-name-row conc-session-indiv-row">
          {% for conc_sess in session.concurrent_sessions %}
            {% assign data_index = "" %}
            {% for talk in conc_sess.talks %}
              {% capture data_index %}{{ data_index }}{{ talk.id }} {{ talk.speakers | join: ', ' | downcase }} {{ talk.name | downcase }} {{ conc_sess.name | downcase }}{% endcapture %}
            {% endfor %}
            {% for talk in conc_sess.posters %}
              {% capture data_index %}{{ data_index }}{{ talk.id }} {{ talk.speakers | join: ', ' | downcase }} {{ talk.name | downcase }} {{ conc_sess.name | downcase }}{% endcapture %}
            {% endfor %}
              <td class="session conc-session" data-index="{{ data_index }}">
              <div class="conc-session-name">{{ conc_sess.name }}</div>
            <div class="speakers session-speakers">{% if conc_sess.chair %}<span class="session-chair-label">Chair:</span> {{ conc_sess.chair }}{% endif %}</div>
            </td>
          {% endfor %}
      </tr>
      <tr class="session-row conc-session-loc-row">
          {% for conc_sess in session.concurrent_sessions %}
            <td class="session-location conc-session-location">{{ conc_sess.location }}</td>
          {% endfor %}
      </tr>
      <tr class="session-row conc-session-details-row">
        {% for conc_sess in session.concurrent_sessions %}
          {% if conc_sess.talks %}
          <td class="session-details talk-sessions">
            {% for talk in conc_sess.talks %}
              <div class="talk searchable" id="session-{{ talk.sess_id }}" 
                  data-index="{{ talk.id }} {{ talk.speakers | join: '; ' | downcase }} {{ talk.name | downcase }} {{ conc_sess.name | downcase }}" 
                  onclick="toggleSession('{{ talk.sess_id }}');"
                  title="{{ talk.speakers | join: '; ' }}. ABSTRACT: {{ talk.abstract }}">
                <div class="times talk-time"">
                  {{ talk.start | date: "%H:%M" }}
                </div>
                <div class="talk-title" id="paper-{{ talk.id | slugify }}">
                  {% if talk.is_tacl %}<div class="badge tacl-badge"></div>{% endif %}                  
                {{ talk.name }}</div>
              </div>
            {% endfor %}
          </td>
          {% elsif conc_sess.posters %}
          <td class="session-details poster-sessions">
            <div class="poster-scrollable">
            {% for talk in conc_sess.posters %}
              <div class="poster searchable" 
                  data-index="{{ talk.id }} {{ talk.speakers | join: '; ' | downcase }} {{ talk.name | downcase }} {{ conc_sess.name | downcase }}" 
                  title="{{ talk.speakers | join: '; ' }}. ABSTRACT: {{ talk.abstract }}">
                <div class="talk-title" id="paper-{{ talk.id | slugify }}">{{ talk.name }}</div>
              </div>
            {% endfor %}
            </div>
          </td>
          {% else %}
          <td class="session-details"></td>
          {% endif %}
        {% endfor %}
      {% endif %}
      </tr>
    {% endfor %}
  </table>
</div>
{% endfor %}
</div>

<div class="calendar-sync">
  <ul>
    <li><a href="#" onclick="calendarDownloadSelectedSessions(); return false;"><i class="fas fa-download"></i>&nbsp;Download Selected as iCal files</a></li>
    {% comment %}
    <li><a href="#" onclick="gcalSyncSelectedSessions(); return false;">Upload Selected to Google Calendar</a>
      <button id="signin-button" onclick="googleHandleSignInClick()">Sign In</button>
      <button id="signout-button" onclick="googleHandleSignOutClick()">Sign Out</button>
    </li>
    {% endcomment %}
  </ul>
  <button onclick="clearSessions();">Clear All</button>
</div>


<script src="https://cdn.jsdelivr.net/npm/idb-keyval@3/dist/idb-keyval-iife.min.js"></script>
<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
<script type="text/javascript" src="{{ site.github.url }}/downloads/ics.deps.min.js"></script>
<script type="text/javascript">
  var rawScheduleData = {{ site.main_schedule | jsonify }};

  var selected = new Set();
  var selectedIdb = new idbKeyval.Store('sel-conf-sessions', 'sel-conf-sessions');

  function extractSchedulable() {
    byId = {};
    days = rawScheduleData.days;
    for (var i = 0; i < days.length; i++) {
      sessions = days[i].sessions;
      for (var j = 0; j < sessions.length; j++) {
        sess = sessions[j];
        byId[sess.sess_id] = {'shared': true, 'item': sess};
        concurrent = sess.concurrent_sessions;
        if (typeof concurrent === 'undefined') 
          continue;

        for (var k = 0; k < concurrent.length; k++) {
          talks = concurrent[k].talks;
          if (typeof talks === 'undefined')
            continue;
          for (var l = 0; l < talks.length ; l++) {
            talk = talks[l];
            byId[talk.sess_id] = {'shared': false, 'item': talk}
          }
        }
      }
    }
    return byId;
  }

  var schedulable = extractSchedulable();

  function toggleSession(sessId) {
    var elem = document.getElementById('session-' + sessId);
    idbKeyval.get(sessId, selectedIdb).then(function(value) {
      if (value) {
        idbKeyval.del(sessId, selectedIdb);
        elem.classList.remove("selected");
      } else {
        idbKeyval.set(sessId, true, selectedIdb);
        elem.classList.add("selected");
      }
    });  
  }

  function doSessionSyncFromStored() {
    idbKeyval.keys(selectedIdb).then(function(keys) {
      syncSessionsInDomFromStored(keys);
    });
  }

  function syncSessionsInDomFromStored(selectedSessKeys) {
    Array.from(document.getElementsByClassName("selected")).forEach(function(e) {
      e.classList.remove("selected");
    });
    selectedSessKeys.forEach(function(k) {
      var elem = document.getElementById('session-' + k);
      elem.classList.add("selected");      
    });
  }

  function clearSessions() {
    idbKeyval.keys(selectedIdb).then(function(keys) {
      keys.forEach(function(k) {
        idbKeyval.del(k, selectedIdb);
      });
      doSessionSyncFromStored();
    });
  }

  function slugify(text) {
    return text.replace(/\s+/g, '_').replace(/[^\w+]/g, '').toLowerCase();
  }
  
  function sessionDesc(sess) {
    return typeof sess.speakers === 'undefined' ? '' : sess.speakers.join(', ');
  }
  
  function sessionLoc(sess) {
    return typeof sess.location === 'undefined' ? '' : sess.location;    
  }
  

  function calendarDownloadSelectedSessions() {
    idbKeyval.keys(selectedIdb).then(function(sel) {
      calendarDownloadByIds(sel);
    });
  }

  function calendarDownloadByIds(sessIds) {
    var sessions = sessIds.map(function(si) { 
      return schedulable[si].item; 
    });
    calendarDownloadSessions(sessions);
  }

  function calendarDownloadSessions(sessions) {
    var cal = ics('ACL18');
    for (var i = 0; i < sessions.length; ++i) {
      var sess = sessions[i];
      cal.addEvent(sess.name + " (ACL18)", sessionDesc(sess), sessionLoc(sess), sess.start, sess.end);
    }
    cal.download('ACL18');
  }
</script>
<script src="https://apis.google.com/js/api.js"></script>
<script type="text/javascript">


  function googleUpdateSigninStatus(isSignedIn) {
    // When signin status changes, this function is called.
    // If the signin status is changed to signedIn, we make an API call.
    if (isSignedIn) {
      // makeApiCall();
    }
  }

  function googleHandleSignInClick(event) {
    // Ideally the button should only show up after gapi.client.init finishes, so that this
    // handler won't be called before OAuth is initialized.
    gapi.auth2.getAuthInstance().signIn();
  }

  function googleHandleSignOutClick(event) {
    gapi.auth2.getAuthInstance().signOut();
  }
  
  function googleInitClient() {
    // Initialize the client with API key and People API, and initialize OAuth with an
    // OAuth 2.0 client ID and scopes (space delimited string) to request access.
    gapi.client.init({
        apiKey: '{{ site.google.api_key }}',
        discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],
        clientId: '{{ site.google.calendar_client_id }}',
        scope: 'https://www.googleapis.com/auth/calendar'
    }).then(function() {
      // Listen for sign-in state changes.
      gapi.auth2.getAuthInstance().isSignedIn.listen(googleUpdateSigninStatus);
      // Handle the initial sign-in state.
      googleUpdateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
    });
  }

  function gcalSyncSelectedSessions() {
    gcalSyncByIds(Array.from(selected));
  }

  function gcalSyncByIds(sessIds) {
    var sessions = sessIds.map(function(si) { 
      return schedulable[si].item; 
    });
    gcalSyncSessions(sessions);
  }

  function gcalSyncSessions(sessions) {
    var cal = ics('ACL18');
    for (var i = 0; i < sessions.length; ++i) {
      var sess = sessions[i];
      gcalAddSingle(sess.name, sessionDesc(sess), sessionLoc(sess), sess.start, sess.end, sess.sess_id);
    }
  }
  
  function fixDate(rawDateString) {
    return rawDateString.replace(/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}) ([+-]\d+)/, '$1T$2$3');
  }

  function getIcalUid(sess_id) {
    return sess_id + "@" + location.hostname + ":" + location.port;
  }
  
  function gcalAddSingle(name, description, location, start, end, sess_id) {
    var event = {
      'summary': name + " (ACL18)",
      'location': location,
      'description': description,
      'start': {'dateTime': fixDate(start)},
      'end': {'dateTime': fixDate(end)},
      'reminders': {},
      'iCalUID': getIcalUid(sess_id)
    };

    var request = gapi.client.calendar.events.insert({
      'calendarId': 'primary',
      'resource': event
    });
    
    request.execute(function() {
      console.log("added event " + name + " @ " + event['start']['dateTime']);
    })
  }
  
  gapi.load('client:auth2', googleInitClient);
</script>
<script type="text/javascript">
var searchStyle = document.getElementById('search_style');
var auxSearchStyle = document.getElementById('aux_search_style');
document.getElementById('search').addEventListener('input', function() {
  if (!this.value) {
    searchStyle.innerHTML = "";
    auxSearchStyle.innerHTML = "";
    return;
  }
  searchStyle.innerHTML = ".searchable:not([data-index*=\"" + this.value.toLowerCase() + "\"]) { display: none; }  ";
  searchStyle.innerHTML += ".conc-session:not([data-index*=\"" + this.value.toLowerCase() + "\"]) { visibility: hidden; font-size: 0px; }";
  auxSearchStyle.innerHTML = ".shared-name { opacity: 0.5; }"
});
</script>
<script type="text/javascript">
function highlightHash() {
  var elems = document.querySelectorAll(".hash-highlighted");
  [].forEach.call(elems, function(el) {
      el.className = el.className.replace(/\bhash-highlighted\b/, "");
  });  
  if (!document.location.hash)
    return;
  var hashElem = document.getElementById(document.location.hash.substr(1))
  hashElem.classList.add('hash-highlighted');
}
document.addEventListener("hashchange", function(event) { highlightHash(); });
document.addEventListener("DOMContentLoaded", function(event) { highlightHash(); });
document.addEventListener("DOMContentLoaded", function(event) { doSessionSyncFromStored(); });

</script>

